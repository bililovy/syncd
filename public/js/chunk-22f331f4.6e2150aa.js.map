{"version":3,"sources":["webpack:///./src/api/project.js","webpack:///./src/view/project/Member.vue?8380","webpack:///src/view/project/Member.vue","webpack:///./src/view/project/Member.vue?d589","webpack:///./src/view/project/Member.vue"],"names":["__webpack_require__","d","__webpack_exports__","newSpaceApi","updateSpaceApi","listSpaceApi","detailSpaceApi","deleteSpaceApi","searchMemberApi","addMemberApi","listMemberApi","removeMemberApi","newProjectApi","updateProjectApi","listProjectApi","switchStatusProjectApi","detailProjectApi","deleteProjectApi","updateBuildScriptApi","_lib_fetch_js__WEBPACK_IMPORTED_MODULE_0__","data","post","params","get","render","_vm","this","_h","$createElement","_c","_self","spaceId","attrs","shadow","staticClass","type","icon","size","on","click","switchSpaceHandler","_v","_s","$t","staticStyle","min-height","directives","name","rawName","value","expression","spaceDetail","description","span","width","clearable","filterable","remote","loading-text","no-match-text","remote-method","searchMemberHandler","loading","memberLoading","placeholder","model","callback","$$v","memberId","_l","m","key","id","label","username","email","role_name","margin-left","addMemberHandler","tableData","prop","scopedSlots","_u","fn","scope","row","status","align","$event","deleteHandler","background","layout","current-page","$root","Page","page-size","PageSize","total","Total","current-change","currentChangeHandler","update:currentPage","$set","title","closable","show-icon","DialogSmallWidth","visible","dialogSpaceVisible","update:visible","padding-bottom","change","selectSpaceHandler","s","Substr","staticRenderFns","Membervue_type_script_lang_js_","tableLoading","undefined","spaceLoading","spaceList","memberSearchList","lastSearchTimer","watch","_this","Object","project","then","res","catch","err","PageInit","loadTableData","methods","query","_this2","clearTimeout","setTimeout","keyword","_this3","member_id","space_id","$message","success","code","CODE_ERR_DATA_REPEAT","error","_this4","ConfirmDelete","MessageSuccess","PageReset","_this5","offset","PageOffset","limit","list","loadSpaceList","_this6","mounted","project_Membervue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-22f331f4.6e2150aa.js","sourcesContent":["import {get, post} from '@/lib/fetch.js'\n\nexport function newSpaceApi(data) {\n    return post('/project/space/add', data)\n}\n\nexport function updateSpaceApi(data) {\n    return post('/project/space/update', data)\n}\n\nexport function listSpaceApi(params) {\n    return get('/project/space/list', params)\n}\n\nexport function detailSpaceApi(params) {\n    return get('/project/space/detail', params)\n}\n\nexport function deleteSpaceApi(data) {\n    return post('/project/space/delete', data)\n}\n\nexport function searchMemberApi(params) {\n    return get('/project/member/search', params)\n}\n\nexport function addMemberApi(data) {\n    return post('/project/member/add', data)\n}\n\nexport function listMemberApi(params) {\n    return get('/project/member/list', params)\n}\n\nexport function removeMemberApi(data) {\n    return post('/project/member/remove', data)\n}\n\nexport function newProjectApi(data) {\n    return post('/project/add', data)\n}\n\nexport function updateProjectApi(data) {\n    return post('/project/update', data)\n}\n\nexport function listProjectApi(params) {\n    return get('/project/list', params)\n}\n\nexport function switchStatusProjectApi(data) {\n    return post('/project/switchstatus', data)\n}\n\nexport function detailProjectApi(params) {\n    return get('/project/detail', params)\n}\n\nexport function deleteProjectApi(data) {\n    return post('/project/delete', data)\n}\n\nexport function updateBuildScriptApi(data) {\n    return post('/project/buildscript', data)\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.spaceId)?_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-alert',{staticClass:\"app-btn-group\",attrs:{\"title\":_vm.$t('prompt_message'),\"type\":\"info\",\"closable\":false,\"description\":_vm.$t('project_member_select_space_tips'),\"show-icon\":\"\"}}),_c('div',{staticClass:\"app-btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\",\"size\":\"small\"},on:{\"click\":_vm.switchSpaceHandler}},[_vm._v(_vm._s(_vm.$t('select_project_space')))])],1),_c('div',{staticClass:\"app-divider\"})],1):_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"app-btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\",\"size\":\"small\"},on:{\"click\":_vm.switchSpaceHandler}},[_vm._v(_vm._s(_vm.$t('switch_project_space')))])],1),_c('div',{staticClass:\"app-btn-group\",staticStyle:{\"min-height\":\"30px\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.spaceLoading),expression:\"spaceLoading\"}]},[_c('h4',[_vm._v(_vm._s(this.spaceDetail.name))]),_c('p',{staticClass:\"app-description\"},[_vm._v(_vm._s(this.spaceDetail.description))])])]),_c('div',{staticClass:\"app-divider\"}),_c('div',{staticClass:\"app-btn-title\"},[_vm._v(_vm._s(_vm.$t('add_new_member')))]),_c('el-row',{staticClass:\"app-btn-group\"},[_c('el-col',{attrs:{\"span\":10}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"remote\":\"\",\"loading-text\":_vm.$t('looking_for_users'),\"no-match-text\":_vm.$t('user_not_found'),\"remote-method\":_vm.searchMemberHandler,\"loading\":_vm.memberLoading,\"placeholder\":_vm.$t('search_for_users_by_username_and_email')},model:{value:(_vm.memberId),callback:function ($$v) {_vm.memberId=$$v},expression:\"memberId\"}},_vm._l((_vm.memberSearchList),function(m){return _c('el-option',{key:m.id,attrs:{\"value\":m.id,\"label\":m.username + ' - ' + m.email +  ' - ' + m.role_name}})}),1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.addMemberHandler}},[_vm._v(_vm._s(_vm.$t('add')))])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticClass:\"app-table\",attrs:{\"size\":\"medium\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"width\":\"220\",\"label\":_vm.$t('username')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.username)?_c('span',[_vm._v(_vm._s(scope.row.username))]):_c('span',{staticClass:\"app-line-through\"},[_vm._v(\"已删除\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"width\":\"260\",\"label\":_vm.$t('email')}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":_vm.$t('role')}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"width\":\"100\",\"label\":_vm.$t('status')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status == '1')?_c('span',{staticClass:\"app-color-success\"},[_c('i',{staticClass:\"iconfont icon-unlock\"}),_vm._v(\" \"+_vm._s(_vm.$t('normal'))+\"\\n                    \")]):_c('span',{staticClass:\"app-color-error\"},[_c('i',{staticClass:\"iconfont icon-lock\"}),_vm._v(\" \"+_vm._s(_vm.$t('locking'))+\"\\n                    \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('operate'),\"width\":\"100\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"app-danger\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteHandler(scope.row)}}},[_vm._v(_vm._s(_vm.$t('remove')))])]}}])})],1),_c('el-pagination',{staticClass:\"app-pagination\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.$root.Page,\"page-size\":_vm.$root.PageSize,\"total\":_vm.$root.Total},on:{\"current-change\":_vm.currentChangeHandler,\"update:currentPage\":function($event){_vm.$set(_vm.$root, \"Page\", $event)}}})],1),_c('el-dialog',{attrs:{\"width\":_vm.$root.DialogSmallWidth,\"visible\":_vm.dialogSpaceVisible,\"title\":_vm.$t('select_project_space')},on:{\"update:visible\":function($event){_vm.dialogSpaceVisible=$event}}},[_c('div',{staticStyle:{\"padding-bottom\":\"50px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"size\":\"small\",\"placeholder\":_vm.$t('select_project_space')},on:{\"change\":_vm.selectSpaceHandler},model:{value:(_vm.spaceId),callback:function ($$v) {_vm.spaceId=$$v},expression:\"spaceId\"}},_vm._l((_vm.spaceList),function(s){return _c('el-option',{key:s.id,attrs:{\"value\":s.id,\"label\":_vm.$root.Substr(s.name, 50)}})}),1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <el-card shadow=\"never\" v-if=\"!spaceId\">\n            <el-alert\n            class=\"app-btn-group\"\n            :title=\"$t('prompt_message')\"\n            type=\"info\"\n            :closable=\"false\"\n            :description=\"$t('project_member_select_space_tips')\"\n            show-icon></el-alert>\n            <div class=\"app-btn-group\">\n                <el-button type=\"primary\" @click=\"switchSpaceHandler\" icon=\"el-icon-refresh\" size=\"small\">{{ $t('select_project_space') }}</el-button>\n            </div>\n            <div class=\"app-divider\"></div>\n        </el-card>\n        <el-card shadow=\"never\" v-else>\n            <div class=\"app-btn-group\">\n                <el-button type=\"primary\" @click=\"switchSpaceHandler\" icon=\"el-icon-refresh\" size=\"small\">{{ $t('switch_project_space') }}</el-button>\n            </div>\n            <div class=\"app-btn-group\" style=\"min-height: 30px\">\n                <div v-loading=\"spaceLoading\">\n                    <h4>{{ this.spaceDetail.name }}</h4>\n                    <p class=\"app-description\">{{ this.spaceDetail.description }}</p>\n                </div>\n            </div>\n            <div class=\"app-divider\"></div>\n            <div class=\"app-btn-title\">{{ $t('add_new_member') }}</div>\n            <el-row class=\"app-btn-group\">\n                <el-col :span=\"10\">\n                    <el-select \n                    v-model=\"memberId\"\n                    style=\"width: 100%;\"\n                    size=\"small\"\n                    clearable\n                    filterable\n                    remote\n                    :loading-text=\"$t('looking_for_users')\"\n                    :no-match-text=\"$t('user_not_found')\"\n                    :remote-method=\"searchMemberHandler\"\n                    :loading=\"memberLoading\"\n                    :placeholder=\"$t('search_for_users_by_username_and_email')\">\n                        <el-option v-for=\"m in memberSearchList\" :key=\"m.id\" :value=\"m.id\" :label=\"m.username + ' - ' + m.email +  ' - ' + m.role_name\"></el-option>\n                    </el-select>\n                </el-col>\n                <el-col :span=\"8\">\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"addMemberHandler\">{{ $t('add') }}</el-button>\n                </el-col>\n            </el-row>\n            <el-table\n                class=\"app-table\"\n                size=\"medium\"\n                v-loading=\"tableLoading\"\n                :data=\"tableData\">\n                <el-table-column prop=\"username\" width=\"220\" :label=\"$t('username')\">\n                    <template slot-scope=\"scope\">\n                        <span v-if=\"scope.row.username\">{{ scope.row.username }}</span>\n                        <span class=\"app-line-through\" v-else>已删除</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"email\" width=\"260\" :label=\"$t('email')\"></el-table-column>\n                <el-table-column prop=\"role_name\" :label=\"$t('role')\"></el-table-column>\n                <el-table-column prop=\"status\" width=\"100\" :label=\"$t('status')\">\n                    <template slot-scope=\"scope\">\n                        <span class=\"app-color-success\" v-if=\"scope.row.status == '1'\">\n                            <i class=\"iconfont icon-unlock\"></i> {{ $t('normal') }}\n                        </span>\n                        <span class=\"app-color-error\" v-else>\n                            <i class=\"iconfont icon-lock\"></i> {{ $t('locking') }}\n                        </span>\n                    </template>\n                </el-table-column>\n                <el-table-column :label=\"$t('operate')\" width=\"100\" align=\"right\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                        type=\"text\"\n                        icon=\"el-icon-delete\"\n                        class=\"app-danger\"\n                        @click=\"deleteHandler(scope.row)\">{{ $t('remove') }}</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                class=\"app-pagination\"\n                @current-change=\"currentChangeHandler\"\n                :current-page.sync=\"$root.Page\"\n                :page-size=\"$root.PageSize\"\n                :total=\"$root.Total\">\n            </el-pagination>\n        </el-card>\n\n        <el-dialog \n        :width=\"$root.DialogSmallWidth\"\n        :visible.sync=\"dialogSpaceVisible\"\n        :title=\"$t('select_project_space')\">\n            <div style=\"padding-bottom: 50px;\">\n                <el-select filterable @change=\"selectSpaceHandler\" v-model=\"spaceId\" style=\"width: 100%;\" size=\"small\" :placeholder=\"$t('select_project_space')\">\n                    <el-option v-for=\"s in spaceList\" :key=\"s.id\" :value=\"s.id\" :label=\"$root.Substr(s.name, 50)\" ></el-option>\n                </el-select>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { listSpaceApi, detailSpaceApi, searchMemberApi, addMemberApi, listMemberApi, removeMemberApi } from '@/api/project'\nimport Code from '@/lib/code'\nexport default {\n    data() {\n        return {\n            dialogSpaceVisible: false,\n\n            tableData: [],\n            tableLoading: false,\n\n            spaceId: undefined,\n            spaceLoading: false,\n            spaceList: [],\n            spaceDetail: {},\n\n            memberId: undefined,\n            memberLoading: false,\n            memberSearchList: [],\n            lastSearchTimer: null,\n        }\n    },\n    watch: {\n        spaceId() {\n            if (this.spaceId) {\n                this.spaceLoading = true\n                detailSpaceApi({id: this.spaceId}).then(res => {\n                    this.spaceDetail = res\n                    this.spaceLoading = false\n                }).catch(err => {\n                    this.spaceLoading = false\n                })\n                this.$root.PageInit()\n                this.loadTableData()\n            }\n        }\n    },\n    methods: {\n        searchMemberHandler(query) {\n            let vm = this\n            this.memberLoading = true\n            clearTimeout(this.lastSearchTimer)\n            this.lastSearchTimer = setTimeout(() => {\n                searchMemberApi({keyword: query}).then(res => {\n                    if (res) {\n                        this.memberSearchList = res\n                    }\n                    this.memberLoading = false\n                }).catch(err => {\n                    this.memberLoading = false\n                })\n            }, 1000);\n        },\n        addMemberHandler() {\n            if (!this.memberId) {\n                this.$message.error(this.$t('search_and_select_users_before_adding'));\n                return\n            }\n            addMemberApi({member_id: this.memberId, space_id: this.spaceId}).then(res => {\n                this.memberId = undefined\n                this.memberSearchList = []\n                this.$message.success(this.$t('member_added_successfully'));\n                this.$root.PageInit()\n                this.loadTableData()\n            }).catch(err => {\n                if (Code.CODE_ERR_DATA_REPEAT == err.code) {\n                    this.$message.error(this.$t('member_already_exists_do_not_add_repeat'));\n                }\n            })\n        },\n        selectSpaceHandler() {\n            this.dialogSpaceVisible = false\n        },\n        switchSpaceHandler() {\n            this.dialogSpaceVisible = true\n        },\n        deleteHandler(row) {\n            this.$root.ConfirmDelete(() => {\n                removeMemberApi({id: row.id}).then(res => {\n                    this.$root.MessageSuccess()\n                    this.$root.PageReset()\n                    this.loadTableData()\n                })\n            })\n        },\n        currentChangeHandler() {\n            this.loadTableData()\n        },\n        loadTableData() {\n            this.tableLoading = true\n            listMemberApi({space_id: this.spaceId, offset: this.$root.PageOffset(), limit: this.$root.PageSize}).then(res => {\n                this.tableData = res.list\n                this.$root.Total = res.total\n                this.tableLoading = false\n            }).catch(err => {\n                this.tableLoading = false\n            })\n        },\n        loadSpaceList() {\n            listSpaceApi({offset: 0, limit: 999}).then(res => {\n                if (res.list) {\n                    this.spaceList = res.list\n                }\n            })\n        },\n    },\n    mounted() {\n        this.loadSpaceList()\n    }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Member.vue?vue&type=template&id=57481b5d&\"\nimport script from \"./Member.vue?vue&type=script&lang=js&\"\nexport * from \"./Member.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Member.vue\"\nexport default component.exports"],"sourceRoot":""}